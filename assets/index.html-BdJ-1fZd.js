import{_ as n,c as a,a as e,o as l}from"./app-CJfFg5nr.js";const i="/blog/assets/1-Cau7UZrF.png",t={};function p(c,s){return l(),a("div",null,s[0]||(s[0]=[e(`<p>用于在 linux 下管理软件版本，其原理如下：</p><p>在<code>/etc/alternatives</code>存放软链接<code>link_name</code>，指向实际的可执行文件<code>command-version-x</code>。在<code>/usr/bin</code>目录下存放软链接<code>command_name</code>指向<code>/etc/alternatives/link_name</code>。本质是通过两段软链来达到最终命令指向，之间的一段用于版本控制。</p><p>命令参数如下：</p><div class="language-plain line-numbers-mode" data-ext="plain" data-title="plain"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span>用法：update-alternatives [&lt;选项&gt; ...] &lt;命令&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>命令：</span></span>
<span class="line"><span>  --install &lt;链接&gt; &lt;名称&gt; &lt;路径&gt; &lt;优先级&gt;</span></span>
<span class="line"><span>    [--slave &lt;链接&gt; &lt;名称&gt; &lt;路径&gt;] ...</span></span>
<span class="line"><span>                           在系统中加入一组候选项（--slave 可选多个）。</span></span>
<span class="line"><span>  --remove &lt;名称&gt; &lt;路径&gt;   从 &lt;名称&gt; 替换组中去除 &lt;路径&gt; 项。</span></span>
<span class="line"><span>  --remove-all &lt;名称&gt;      从替换系统中删除 &lt;名称&gt; 替换组。</span></span>
<span class="line"><span>  --auto &lt;名称&gt;            将 &lt;名称&gt; 的主链接切换到自动模式。</span></span>
<span class="line"><span>  --display &lt;名称&gt;         显示关于 &lt;名称&gt; 替换组的信息。</span></span>
<span class="line"><span>  --query &lt;名称&gt;           机器可读版的 --display &lt;名称&gt;.</span></span>
<span class="line"><span>  --list &lt;名称&gt;            列出 &lt;名称&gt; 替换组中所有的可用候选项。</span></span>
<span class="line"><span>  --get-selections         列出主要候选项名称以及它们的状态。</span></span>
<span class="line"><span>  --set-selections         从标准输入中读入候选项的状态。</span></span>
<span class="line"><span>  --config &lt;名称&gt;          列出 &lt;名称&gt; 替换组中的可选项，并就使用其中</span></span>
<span class="line"><span>                           哪一个，征询用户的意见。</span></span>
<span class="line"><span>  --set &lt;名称&gt; &lt;路径&gt;      将 &lt;路径&gt; 设置为 &lt;名称&gt; 的候选项。</span></span>
<span class="line"><span>  --all                    对所有可选项一一调用 --config 命令。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;链接&gt; 是指向 /etc/alternatives/&lt;名称&gt; 的符号链接。</span></span>
<span class="line"><span>    (如 /usr/bin/pager)</span></span>
<span class="line"><span>&lt;名称&gt; 是该链接替换组的主控名。</span></span>
<span class="line"><span>    (如 pager)</span></span>
<span class="line"><span>&lt;路径&gt; 是候选项目标文件的位置。</span></span>
<span class="line"><span>    (如 /usr/bin/less)</span></span>
<span class="line"><span>&lt;优先级&gt; 是一个整数，在自动模式下，这个数字越高的选项，其优先级也就越高。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>选项：</span></span>
<span class="line"><span>  --altdir &lt;目录&gt;          改变候选项目录。</span></span>
<span class="line"><span>                             （默认是 /etc/alternatives）。</span></span>
<span class="line"><span>  --admindir &lt;目录&gt;        设置 statoverride 文件的目录。</span></span>
<span class="line"><span>                             （默认是 /var/lib/dpkg/alternatives）。</span></span>
<span class="line"><span>  --instdir &lt;目录&gt;         改变安装目录。</span></span>
<span class="line"><span>  --root &lt;目录&gt;            改变文件系统根目录。</span></span>
<span class="line"><span>  --log &lt;文件&gt;             改变日志文件。</span></span>
<span class="line"><span>  --force                  允许使用候选项链接替换文件。</span></span>
<span class="line"><span>  --skip-auto              在自动模式中跳过设置正确候选项的提示</span></span>
<span class="line"><span>                           (只与 --config 有关)</span></span>
<span class="line"><span>  --quiet                  安静模式，输出尽可能少的信息。</span></span>
<span class="line"><span>  --verbose                启用详细输出。</span></span>
<span class="line"><span>  --debug                  调试输出，信息更多。</span></span>
<span class="line"><span>  --help                   显示本帮助信息。</span></span>
<span class="line"><span>  --version                显示版本信息。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下示例管理 gcc 版本</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 添加多个 gcc</span></span>
<span class="line"><span style="color:#61AFEF;">sudo</span><span style="color:#98C379;"> update-alternatives</span><span style="color:#D19A66;"> --install</span><span style="color:#98C379;"> /usr/bin/gcc</span><span style="color:#98C379;"> gcc</span><span style="color:#98C379;"> /usr/bin/gcc-5</span><span style="color:#D19A66;"> 10</span><span style="color:#D19A66;"> --slave</span><span style="color:#98C379;"> /usr/bin/g++</span><span style="color:#98C379;"> g++</span><span style="color:#98C379;"> /usr/bin/g++-5</span></span>
<span class="line"><span style="color:#61AFEF;">sudo</span><span style="color:#98C379;"> update-alternatives</span><span style="color:#D19A66;"> --install</span><span style="color:#98C379;"> /usr/bin/gcc</span><span style="color:#98C379;"> gcc</span><span style="color:#98C379;"> /usr/bin/gcc-7</span><span style="color:#D19A66;"> 20</span><span style="color:#D19A66;"> --slave</span><span style="color:#98C379;"> /usr/bin/g++</span><span style="color:#98C379;"> g++</span><span style="color:#98C379;"> /usr/bin/g++-7</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 展示 gcc 版本</span></span>
<span class="line"><span style="color:#61AFEF;">sudo</span><span style="color:#98C379;"> update-alternatives</span><span style="color:#D19A66;"> --display</span><span style="color:#98C379;"> gcc</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 移除 gcc-7 的版本</span></span>
<span class="line"><span style="color:#61AFEF;">sudo</span><span style="color:#98C379;"> update-alternatives</span><span style="color:#D19A66;"> --remove</span><span style="color:#98C379;"> gcc</span><span style="color:#98C379;"> /usr/bin/gcc-7</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 交互式的管理 gcc 版本</span></span>
<span class="line"><span style="color:#61AFEF;">sudo</span><span style="color:#98C379;"> update-alternatives</span><span style="color:#D19A66;"> --config</span><span style="color:#98C379;"> gcc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="v2raya" tabindex="-1"><a class="header-anchor" href="#v2raya"><span>v2raya</span></a></h1><p>该工具可在 linux 下运行一个 web 应用用于管理当前 linux 的代理（适合给软路由和虚拟机安装）。本质还是使用的 v2ray-core，该工具相当于封装了一个 web 版本。</p><p>可从 github 直接<a href="https://github.com/v2rayA/v2rayA" target="_blank" rel="noopener noreferrer">下载</a>，该软件依赖 v2ray-core，因此要先下载 <a href="https://github.com/v2fly/v2ray-core" target="_blank" rel="noopener noreferrer">v2ray-core</a>。</p><ol><li>首先下载并解压 v2ray-core<code>mkdir v2ray &amp;&amp; unzip v2ray-linux-64.zip -d v2ray</code></li><li>下载 v2raya 的安装包直接安装<code>sudo apt install -y /home/lhc/packages/installer_debian_x64_2.2.5.7.deb</code></li><li>安装完成后由于 v2ray-core 不是通过 apt 安装的，因此需要修改一下 v2raya 的配置，该配置在<code>/etc/default/v2raya</code>修改其中的<code>V2RAYA_V2RAY_CONFDIR、V2RAYA_V2RAY_ASSETSDIR</code>将其都改为 v2ray-core 解压后的文件夹。其它参数可自行修改</li><li>启动并添加到开机启动项<code>systemctl daemon-reload &amp;&amp; systemctl start v2raya.service &amp;&amp; systemctl enable v2raya.service</code></li><li>通过浏览器打开<code>127.0.0.1:2017</code>（局域网在确定不受防火墙干扰的情况下也可以通过其它主机登录管理）可打开控制台页面。第一次打开时需要创建账号。进入后导入订阅规则，然后选择可用节点</li><li>右上角配置选择如下</li></ol><p><img src="`+i+'" alt="" width="1666" height="1214"></p><ol start="7"><li>保存并应用后，左上角点击开启，最后在终端中验证一下<code>curl google.com</code>（注意该软件暂时不能代理 ping 命令，本质还是通过修改路由表的方式实现的代理）</li></ol>',12)]))}const o=n(t,[["render",p],["__file","index.html.vue"]]),d=JSON.parse('{"path":"/article/indhndk3/","title":"tools","lang":"zh-CN","frontmatter":{"title":"tools","tags":["tools","os"],"createTime":"2025/03/02 20:11:47","permalink":"/article/indhndk3/","description":"用于在 linux 下管理软件版本，其原理如下： 在/etc/alternatives存放软链接link_name，指向实际的可执行文件command-version-x。在/usr/bin目录下存放软链接command_name指向/etc/alternatives/link_name。本质是通过两段软链来达到最终命令指向，之间的一段用于版本控制。 ...","head":[["meta",{"property":"og:url","content":"https://upcloudrabbit.github.io/blog/blog/article/indhndk3/"}],["meta",{"property":"og:site_name","content":"upcloudrabbit blog"}],["meta",{"property":"og:title","content":"tools"}],["meta",{"property":"og:description","content":"用于在 linux 下管理软件版本，其原理如下： 在/etc/alternatives存放软链接link_name，指向实际的可执行文件command-version-x。在/usr/bin目录下存放软链接command_name指向/etc/alternatives/link_name。本质是通过两段软链来达到最终命令指向，之间的一段用于版本控制。 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-02T12:16:32.000Z"}],["meta",{"property":"article:tag","content":"tools"}],["meta",{"property":"article:tag","content":"os"}],["meta",{"property":"article:modified_time","content":"2025-03-02T12:16:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"tools\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-03-02T12:16:32.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":3.32,"words":997},"git":{"updatedTime":1740917792000,"contributors":[{"name":"upcloudrabbit","username":"upcloudrabbit","email":"1814876440@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/upcloudrabbit?v=4","url":"https://github.com/upcloudrabbit"}]},"autoDesc":true,"filePathRelative":"os/tools.md","categoryList":[{"id":"dd302f","sort":10000,"name":"os"}]}');export{o as comp,d as data};
